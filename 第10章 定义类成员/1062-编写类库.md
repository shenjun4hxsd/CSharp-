![](/assets/10-13.png)##ç¼–å†™ç±»åº“

&emsp;&emsp;å¯¹äºæœ¬ä¾‹ï¼Œå‡å®šè¯»è€…å¯¹ IDE æ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ‰€ä»¥ä¸å†ä½¿ç”¨æ ‡å‡†çš„ â€œè¯•ä¸€è¯•â€ æ–¹å¼æ˜ç¡®åˆ—å‡ºå„ä¸ªæ­¥éª¤ï¼ˆè¿™äº›æ­¥éª¤å·²ç»åœ¨å‰é¢å¤šæ¬¡ç”¨è¿‡ï¼‰ï¼Œé‡è¦çš„æ˜¯è¯¦ç»†è®¨è®ºä»£ç ã€‚ä¸è¿‡ï¼Œè¿™é‡Œè¦åŒ…å«ä¸€äº›æç¤ºä»¥ç¡®ä¿ä¸å‡ºé—®é¢˜ã€‚

&emsp;&emsp;ç±»å’Œæšä¸¾éƒ½åŒ…å«åœ¨ä¸€ä¸ªç±»åº“é¡¹ç›® `Ch10CardLib` ä¸­ã€‚è¿™ä¸ªé¡¹ç›®å°†åŒ…å« 4 ä¸ª `.cs` æ–‡ä»¶ï¼š`Card.cs` åŒ…å« `Card` ç±»çš„å®šä¹‰ï¼Œ`Deck.cs` åŒ…å« `Deck` ç±»çš„å®šä¹‰ï¼Œ `Suit.cs` å’Œ `Rank.cs` æ–‡ä»¶åŒ…å«æšä¸¾ã€‚

&emsp;&emsp;å¯ä»¥ä½¿ç”¨VSçš„ç±»å›¾å·¥å…·æŠŠè®¸å¤šä»£ç ç»„åˆåœ¨ä¸€èµ·ã€‚

>&emsp;&emsp;**å¦‚æœä¸æ„¿æ„ä½¿ç”¨ç±»å›¾å·¥å…·ï¼Œä¹Ÿä¸å¿…æ‹…å¿ƒã€‚ä¸‹é¢å„èŠ‚éƒ½åŒ…å«äº†ç±»å›¾ç”Ÿæˆçš„ä»£ç ï¼Œæ‰€ä»¥è¯»è€…å®Œå…¨å¯ä»¥ç†è§£è¿™äº›å†…å®¹ã€‚**

&emsp;&emsp;é¦–å…ˆéœ€è¦å®Œæˆä»¥ä¸‹æ“ä½œï¼š

&emsp;&emsp;ï¼ˆ1ï¼‰åœ¨ `C:\BegVCSharp\Chapter10` ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°ç±»åº“é¡¹ç›® `Ch10CardLib`ã€‚

&emsp;&emsp;ï¼ˆ2ï¼‰ä»é¡¹ç›®ä¸­åˆ é™¤ `Class1.cs`ã€‚

&emsp;&emsp;ï¼ˆ3ï¼‰ä½¿ç”¨ `è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨` çª—å£æ‰“å¼€é¡¹ç›®çš„ç±»å›¾ï¼ˆå³å‡»é¡¹ç›®ï¼Œç„¶åå•å‡» `ç±»è¯¦ç»†ä¿¡æ¯`ï¼‰ã€‚ç±»å›¾å¼€å§‹æ—¶åº”ä¸ºç©ºç™½ï¼Œå› ä¸ºé¡¹ç›®ä¸åŒ…å«ç±»ã€‚

&emsp;&emsp;**1. Suit å’Œ Rank æšä¸¾**

&emsp;&emsp;æŠŠä¸€ä¸ª `Enum` ä»å·¥å…·ç®±æ‹–åŠ¨åˆ°ç±»å›¾ä¸­ï¼Œå†åœ¨æ˜¾ç¤ºçš„ `New Enum` å¯¹è¯æ¡†ä¸­å¡«å†™ä¿¡æ¯ï¼Œå°±å¯ä»¥åœ¨ç±»å›¾ä¸­æ·»åŠ ä¸€ä¸ªæšä¸¾ã€‚ä¾‹å¦‚ï¼Œå¯¹äº `Suit` æšä¸¾ï¼Œåº”åœ¨å¯¹è¯æ¡†ä¸­æ·»åŠ  `å¦‚å›¾ 10-11 æ‰€ç¤º` çš„ä¿¡æ¯ã€‚


![å›¾ 10-11](/assets/10-11.png)
**`å›¾ 10-11`**



&emsp;&emsp;æ¥ç€ä½¿ç”¨ `ç±»è¯¦ç»†ä¿¡æ¯` çª—å£æ·»åŠ æšä¸¾çš„æˆå‘˜ã€‚éœ€è¦æ·»åŠ çš„å€¼ `å¦‚å›¾ 10-12 æ‰€ç¤º`ã€‚

![å›¾ 10-12](/assets/10-12.png)
**`å›¾ 10-12`**

&emsp;&emsp;ä»¥ç›¸åŒçš„æ–¹å¼åˆ©ç”¨å·¥å…·ç®±æ·»åŠ  `Rank` æšä¸¾ã€‚éœ€è¦çš„å€¼ `å¦‚å›¾ 10-13 æ‰€ç¤º`ã€‚



![å›¾ 10-13](/assets/10-13.png)
**`å›¾ 10-13`**


>&emsp;&emsp;**ç¬¬ä¸€ä¸ªæˆå‘˜ `Ace` çš„è¾“å…¥å€¼ä¸º1ï¼Œå®ƒä¼šä½¿æšä¸¾çš„åº•å±‚å­˜å‚¨åŒ¹é…æ‰‘å…‹ç‰Œçš„å¤§å°ï¼Œä¾‹å¦‚ `Six` å°±å­˜å‚¨ä¸º 6ã€‚**

&emsp;&emsp;ä¸ºè¿™ä¸ªä¸¤ä¸ªæšä¸¾ç”Ÿæˆçš„ä»£ç ä½äº `Suit.cs` å’Œ `Rank.cs` æ–‡ä»¶ä¸­ã€‚åœ¨ `Ch10CardLib` æ–‡ä»¶å¤¹çš„ `Suit.cs` æ–‡ä»¶ä¸­å¯ä»¥æ‰¾åˆ° `Suit` æšä¸¾çš„å®Œæ•´ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```javascript
        using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Text;

        namespace Ch10CardLib
        {
            public enum Suit
            {
                Club,
                Diamond,
                Heart,
                Spade,
            }
        }
```

&emsp;&emsp;åœ¨ `Ch10CardLib` æ–‡ä»¶å¤¹çš„ `Rank.cs` æ–‡ä»¶ä¸­å¯ä»¥æ‰¾åˆ° `Rank` æšä¸¾çš„å®Œæ•´ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```javascript
        using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Text;

        namespace Ch10CardLib
        {
            public enem Rank
            {
                Ace = 1,
                Deuce,
                Three,
                Four,
                Five,
                Six,
                Seven,
                Eight,
                Nine,
                Ten,
                Jack,
                Queen,
                King,
            }
        }
```

&emsp;&emsp;å¦å¤–ï¼Œä¹Ÿå¯ä»¥æ·»åŠ  `Suit.cs` å’Œ `Rank.cs` ä»£ç æ–‡ä»¶ï¼Œå†æ‰‹å·¥è¾“å…¥è¿™äº›ä»£ç ã€‚æ³¨æ„ âš ï¸ï¼Œä»£ç ç”Ÿæˆå™¨åœ¨æœ€åä¸€ä¸ªæšä¸¾æˆå‘˜åæ·»åŠ çš„é€—å·ä¸ä¼šå¦¨ç¢ç¼–è¯‘ï¼Œä¸ä¼šåˆ›å»ºä¸€ä¸ªé¢å¤–çš„ç©ºæˆå‘˜ï¼Œä½†å®ƒä»¬å¯èƒ½ä¼šå¸¦æ¥ä¸€äº›æ··ä¹±ã€‚



&emsp;&emsp;**2. æ·»åŠ  Card ç±»**

&emsp;&emsp;æœ¬èŠ‚å°†ç»“åˆä½¿ç”¨ç±»è®¾è®¡å™¨å’Œä»£ç ç¼–è¾‘å™¨æ¥æ·»åŠ  `Card` ç±»ã€‚ä½¿ç”¨ç±»è®¾è®¡å™¨æ·»åŠ ç±»ä¸æ·»åŠ æšä¸¾ååˆ†ç±»ä¼¼ï¼Œä¹Ÿæ˜¯æŠŠç›¸åº”çš„é¡¹ä»å·¥å…·ç®±æ‹–åŠ¨åˆ°ç±»å›¾ä¸­ã€‚è¿™é‡Œè¦æŠŠ `Class` æ‹–åŠ¨åˆ°ç±»å›¾ä¸­ï¼Œå¹¶æŠŠæ–°ç±»å‘½åä¸º `Card`ã€‚

&emsp;&emsp;ä½¿ç”¨ `ç±»è¯¦ç»†ä¿¡æ¯` çª—å£æ·»åŠ å­—æ®µ `rank` å’Œ `suit`ï¼Œå†ä½¿ç”¨ `å±æ€§` çª—å£æŠŠå­—æ®µçš„ `å¸¸é‡ç±»å‹` è®¾ç½®ä¸º `readonly`ã€‚è¿˜éœ€è¦æ·»åŠ ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯é»˜è®¤æ„é€ å‡½æ•°ï¼ˆç§æœ‰ï¼‰ï¼Œå¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆå…¬å…±ï¼‰å¸¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼š`newSuit` å’Œ `newRank`ï¼Œå…¶ç±»å‹åˆ†åˆ«æ˜¯ `Suit` å’Œ `Rank`ã€‚æœ€åé‡å†™ `ToString()`ï¼Œè¿™éœ€è¦åœ¨ `å±æ€§` çª—å£ä¸­ä¿®æ”¹ `ç»§æ‰¿ä¿®é¥°ç¬¦`ï¼Œå°†å®ƒè®¾ç½®ä¸º `override`ã€‚

&emsp;&emsp;`å›¾ 10-14` æ˜¾ç¤ºäº† `ç±»è¯¦ç»†ä¿¡æ¯` çª—å£å’Œå·²è¾“å…¥æ‰€æœ‰ä¿¡æ¯çš„ `Card` ç±»ï¼ˆå¯åœ¨ `Ch10CardLib\Card.cs` ä¸­æ‰¾åˆ°å…¶ä»£ç ï¼‰ã€‚

![å›¾ 10-14](/assets/10-14.png)
**`å›¾ 10-14`**

&emsp;&emsp;ç„¶åéœ€è¦ä¿®æ”¹ `Card.cs` ä¸­ç±»çš„ä»£ç ï¼ˆæˆ–è€…æŠŠè¿™äº›ä»£ç æ·»åŠ åˆ°åç§°ç©ºé—´ `Ch10CardLib` çš„æ–°ç±» `Card` ä¸­ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```javascript
        public class Card
        {
            public readonly Suit suit;
            public readonly Rank rank;
        }

        private Card() { }

        public Card(Suit newSuit, Rank, newRank)
        {
            suit = newSuit;
            rank = newRank;
        }

        public override string ToString()
        {
            return "The " + rank + " of " + suit + "s";
        }
```

&emsp;&emsp;é‡å†™çš„ `ToString()` æ–¹æ³•å°†å·²å­˜å‚¨çš„æšä¸¾å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºå†™å…¥åˆ°è¿”å›çš„å­—ç¬¦ä¸²ä¸­ï¼Œéé»˜è®¤çš„æ„é€ å‡½æ•°åˆå§‹åŒ– `suit` å’Œ `rank` å­—æ®µçš„å€¼ã€‚

&emsp;&emsp;**3. æ·»åŠ  Deck ç±»**

&emsp;&emsp;`Deck` ç±»éœ€è¦ä½¿ç”¨ç±»å›¾å®šä¹‰ä»¥ä¸‹æˆå‘˜ï¼š

&emsp;&emsp;â— `Card[]` ç±»å‹çš„ç§æœ‰å­—æ®µ `cards`ã€‚

&emsp;&emsp;â— å…¬å…±æ–¹æ³• `GetCard()`ï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ª `int` å‚æ•° `cardNum`ï¼Œå¹¶è¿”å›ä¸€ä¸ª `Card` ç±»å‹çš„å¯¹è±¡ã€‚

&emsp;&emsp;â— å…¬å…±æ–¹æ³• `Shuffle()`ï¼Œå®ƒä¸å¸¦å‚æ•°ï¼Œè¿”å› `void`ã€‚

&emsp;&emsp;æ·»åŠ äº†è¿™äº›æˆå‘˜åï¼Œ`Deck` ç±»çš„ `ç±»è¯¦ç»†ä¿¡æ¯` çª—å£å°± `å¦‚å›¾ 10-15 æ‰€ç¤º`ã€‚ 

![å›¾ 10-15](/assets/10-15.png)
**`å›¾ 10-15`**

&emsp;&emsp;ä¸ºä½¿ç±»å›¾æ›´åŠ æ¸…æ™°ï¼Œå¯ä»¥æ˜¾ç¤ºæ‰€æ·»åŠ çš„æˆå‘˜å’Œç±»å‹ä¹‹é—´çš„å…³ç³»ã€‚åœ¨ç±»å›¾ä¾æ¬¡å³å‡»ä¸‹é¢çš„é¡¹ï¼Œä»èœå•ä¸­é€‰æ‹© `æ˜¾ç¤ºä¸ºå…³è”` é€‰é¡¹ï¼š

&emsp;&emsp;â— `Deck` ä¸­çš„ `cards`

&emsp;&emsp;â— `Card` ä¸­çš„ `suit`

&emsp;&emsp;â— `Card` ä¸­çš„ `rank`

&emsp;&emsp;å®Œæˆåçš„ç±»å›¾ `å¦‚å›¾ 10-16 æ‰€ç¤º`ã€‚

![å›¾ 10-16](/assets/10-16.png)
**`å›¾ 10-16`**

&emsp;&emsp;æ¥ç€ä¿®æ”¹ `Deck.cs` ä¸­çš„ä»£ç ï¼ˆå¦‚æœä¸ä½¿ç”¨ç±»è®¾è®¡å™¨ï¼Œå°±å¿…é¡»é¦–å…ˆä½¿ç”¨ä¸‹é¢çš„ä»£ç æ·»åŠ è¿™ä¸ªç±»ï¼‰ã€‚è¿™äº›ä»£ç åŒ…å«å­åœ¨ `Ch10CardLib\Deck.cs` ä¸­ã€‚é¦–å…ˆå®ç°æ„é€ å‡½æ•°ï¼Œå®ƒåœ¨ `cards` å­—æ®µä¸­åˆ›å»º 52 å¼ ç‰Œï¼Œå¹¶ç»™å®ƒä»¬èµ‹å€¼ã€‚å¯¹ä¸¤ä¸ªæšä¸¾çš„æ‰€æœ‰ç»„åˆè¿›è¡Œè¿­ä»£ï¼Œæ¯æ¬¡è¿­ä»£éƒ½åˆ›å»ºä¸€å¼ ç‰Œã€‚è¿™å°†ä½¿ `cards` æœ€åˆåŒ…å«ä¸€ä¸ªæœ‰åºçš„æ‰‘å…‹ç‰Œåˆ—è¡¨ï¼š

```javascript 
        using System; 
        using System.Collections.Generic; 
        using System.Linq; using System.Text; 
        using System.Threading.Tasks;

 
        namespace Ch10CardLib 
        { 
            public class Deck 
            { 
                private Card[] cards;

 
                public Deck() 
                { 
                    cards = new Card[52]; 
                    for (int suitVal = 0; suitVal < 4; suitVal++) 
                    { 
                        for (int rankVal = 1; rankVal < 14; rankVal++) { cards[suitVal * 13 + rankVal - 1] = new Card((Suit)suitVal, (Rank)rankVal); } } } } }```

&emsp;&emsp;ç„¶åå®ç° `GetCard()` æ–¹æ³•ï¼Œä¸ºæŒ‡å®šçš„ç´¢å¼•è¿”å› `Card` å¯¹è±¡ï¼Œæˆ–è€…ä»¥ä¸å‰é¢ç›¸åŒçš„æ–¹å¼æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼š

```javascript public Card GetCard(int cardNum) { if (cardNum >= 0 && cardnum <= 51) return cards[cardNum]; else throw (new System.ArgumentOutOfRangeException("cardNum", cardNum, "Value must be between 0 and 51.")); }```

&emsp;&emsp;æœ€åå®ç° `Shuffle()` æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„æ‰‘å…‹ç‰Œæ•°ç»„ï¼Œå¹¶æŠŠæ‰‘å…‹ç‰Œä»ç°åœ¨çš„ `cards` æ•°ç»„éšæœºå¤åˆ¶åˆ°è¿™ä¸ªæ•°ç»„ä¸­ã€‚è¿™ä¸ªå‡½æ•°çš„ä¸»ä½“æ˜¯ä¸€ä¸ªä» 0ï½51 çš„å¾ªç¯ï¼Œåœ¨æ¯æ¬¡å¾ªç¯æ—¶ï¼Œéƒ½ä¼šä½¿ç”¨ .NET Framework ä¸­ System.Random ç±»çš„å®ä¾‹ç”Ÿæˆä¸€ä¸ª 0ï½51 ä¹‹é—´çš„éšæœºæ•°ã€‚è¿›è¡Œäº†å®ä¾‹åŒ–åï¼Œè¿™ä¸ªç±»çš„å¯¹è±¡ä½¿ç”¨æ–¹æ³• `Next(X)` ç”Ÿæˆä¸€ä¸ªä»‹äº 0ï½X ä¹‹é—´çš„éšæœºæ•°ã€‚æœ‰äº†ä¸€ä¸ªéšæœºæ•°åï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒä½œä¸ºä¸´æ—¶æ•°ç»„ä¸­ `Card` å¯¹è±¡çš„ç´¢å¼•ï¼Œä»¥ä¾¿å¤åˆ¶ `cards` æ•°ç»„ä¸­çš„æ‰‘å…‹ç‰Œã€‚

&emsp;&emsp;ä¸ºäº†è®°å½•å·²èµ‹å€¼çš„æ‰‘å…‹ç‰Œï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª `bool` å˜é‡çš„æ•°ç»„ï¼Œåœ¨å¤åˆ¶æ¯å¼ ç‰Œæ—¶ï¼ŒæŠŠè¯¥æ•°ç»„ä¸­çš„å€¼æŒ‡å®šä¸º `true`ã€‚åœ¨ç”Ÿæˆéšæœºæ•°æ—¶ï¼Œæ£€æŸ¥è¿™ä¸ªæ•°ç»„ï¼Œçœ‹çœ‹æ—¶å¦å·²ç»æŠŠä¸€å¼ ç‰Œå¤åˆ¶åˆ°ä¸´æ—¶æ•°ç»„ä¸­ç”±éšæœºæ•°æŒ‡å®šçš„ä½ç½®ä¸Šäº†ï¼Œå¦‚æœå·²ç»å¤åˆ¶ï¼Œå°†ç”Ÿæˆå¦ä¸€ä¸ªéšæœºæ•°ã€‚

&emsp;&emsp;è¿™ä¸æ˜¯å®Œæˆè¯¥ä»»åŠ¡çš„æœ€é«˜æ•ˆçš„æ–¹å¼ï¼Œå› ä¸ºç”Ÿæˆçš„è®¸å¤šéšæœºæ•°éƒ½å¯èƒ½æ‰¾ä¸åˆ°ç©ºä½ç½®ä»¥å¤åˆ¶æ‰‘å…‹ç‰Œã€‚ä½†æ˜¯ï¼Œå®ƒä»èƒ½å®Œæˆä»»åŠ¡ï¼Œè€Œä¸”å¾ˆç®€å•ï¼Œå› ä¸º C#ä»£ç çš„æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œæˆ‘ä»¬å‡ ä¹è§‰å¯Ÿä¸åˆ°å»¶è¿Ÿã€‚ä»£ç å¦‚ä¸‹ï¼š

```javascript public void Shuffle() { Card[] newDeck = new Card[52]; bool[] assigned = new bool[52]; Random sourceGen = new Random(); for (int i = 0; i < 52; i++) { int destCard = 0; bool foundCard = false; while (foundCard == false) { destCard = sourceGen.Next(52); if (assigned[destCard] == false) foundCard = true; } assigned[destCard] = true; newDeck[destCard] = cards[i]; } newDeck.CopyTo(cards, 0); }```

&emsp;&emsp;è¿™ä¸ªæ–¹æ³•çš„æœ€åä¸€è¡Œä½¿ç”¨ System.Array ç±»çš„ `CopyTo()` æ–¹æ³•ï¼ˆåœ¨åˆ›å»ºæ•°ç»„æ—¶ä½¿ç”¨ï¼‰ï¼ŒæŠŠ `newDeck` ä¸­æ¯å¼ æ‰‘å…‹ç‰Œå¤åˆ¶å› `cards` ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨åŒä¸€ä¸ª `cards` å¯¹è±¡ä¸­çš„åŒä¸€ç»„ `Card` å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°çš„å®ä¾‹ã€‚å¦‚æœæ”¹ç”¨ `cards=newDeck`ï¼Œå°±ä¼šç”¨å¦ä¸€ä¸ªå¯¹è±¡æ›¿ä»£ `cards` å¼•ç”¨çš„å¯¹è±¡å®ä¾‹ã€‚å¦‚æœå…¶ä»–åœ°æ–¹çš„ä»£ç ä»ä¿ç•™å¯¹åŸ `cards` å®ä¾‹çš„å¼•ç”¨ï¼Œå°±ä¼šå‡ºé—®é¢˜--ä¸ä¼šæ´—ç‰Œã€‚

&emsp;&emsp;è‡³æ­¤ï¼Œå°±å®Œæˆäº†ç±»åº“ä»£ç ã€‚





ğŸ”š

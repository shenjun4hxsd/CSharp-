##对象的声明周期

&emsp;&emsp;每个对象都有一个明确定义的声明周期，除了 “正在使用” 的正常状体之外，还有两个重要的阶段：

&emsp;&emsp;● **构造阶段：** 第一次实例化一个对象时，需要初始化该对象。这个初始化过程称为构造阶段，由构造函数完成。

&emsp;&emsp;● **析构阶段：** 在删除一个对象时，常常需要执行一些清理工作，例如，释放内存，这由析构函数完成。

<br>

&emsp;&emsp;**1. 构造函数**

&emsp;&emsp;对象的初始化过程是自动完成的。我们不需要自己寻找适用于存储新对象的内存空间。但是，在初始化对象的过程中，有时需要执行一些额外的工作。例如，需要初始化对象存储的数据。构造函数就是用于初始化数据的函数。

&emsp;&emsp;所有的类定义都至少包含一个构造函数。在这些构造函数中，可能有一个默认的构造函数，该函数没有参数，与类同名。类定义还可能包含几个带有参数的构造函数，称为非默认的构造函数。代码可以使用它们以许多方式实例化对象，例如给存储在对象中的数据提供初始化。

&emsp;&emsp;在 C#中，用 `new` 关键字来调用构造函数。例如，可以用下面的方式通过其默认的构造函数实例化一个 `CupOfCoffee` 对象：

```csharp
        CupOfCoffee myCup = new CupOfCoffee();
```

&emsp;&emsp;还可以用非默认的构造函数来实例化对象。例如，`CupOfCoffee` 类有一个非默认的构造函数，它使用一个参数在初始化时设置咖啡豆的品牌：

```csharp
        CupOfCoffee myCup = new CupOfCoffee("Blue Mountain");
```

&emsp;&emsp;构造函数与字段、属性和方法一样，可以是公共或私有的。在类外部的代码不能使用私有构造函数实例化对象，而必须使用公共构造函数。这样，通过把默认构造函数设置为私有的，就可以强制类的用户使用非默认的构造函数。

&emsp;&emsp;一些类没有公共的构造函数，外部的代码就不可能实例化它们，这些类称为不可创建的类，但如稍后所述，这些类并不是完全没用的。

<br>

&emsp;&emsp;**2.析构函数**

&emsp;&emsp;.NET Framework 使用析构函数来清理对象。一般情况下，不需要提供析构函数的代码，而是由默认的析构函数自动执行操作。但是，如果在删除对象实例前，需要完成一些重要的操作，就应提供具体的西沟函数。

&emsp;&emsp;例如，如果变量超出了范围，代码就不能访问它，但该变量仍存在于计算机内存的某个地方。只有在.NET 运行程序执行其垃圾回收，进行清理时，该实例才被彻底删除。

>&emsp;&emsp;**不应依赖析构函数来释放对象实例使用的资源，因为析构函数可能在不使用某个对象很久后才释放资源。如果所使用的资源非常重要，着就有可能出问题。有一个解决方法，参阅本章后面的 “可删除对象” 一节。**







🔚